{% extends 'gv/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block css %}
<link rel='stylesheet' type='text/css' href='{% static 'gv/button/my_course.css' %}' />
<link rel='stylesheet' type='text/css' href='{% static 'gv/button/button.css' %}' />
<link rel='stylesheet' type='text/css' href='{% static 'gv/button/table.css' %}' />

{% endblock%}



{% block body %}
<!--メインの部分-->
  <h3 class="page-header" style="text-align:center;">履修を考えよう<br>学科別 人気授業統計</h3>

  <form action='{% url 'course' %}' method='post' name='course'>
    {% csrf_token %}
      <div class="row" id="category-box">
        <div class="col-lg-10 col-lg-offset-1 col-xs-10 col-xs-offset-1">
            <div class="cp_ipselect cp_sl04 line">
                {{ form.category1 }}
            </div>
        </div><!--col-xs-6-->
      </div><!--row-->
        <button class="hamon">
          絞りこみ
        </button>
  </form>
<br>

  <table>
    <thead>
      <tr>
        <th>　  あなたの学科で人気の授業<br>（クリックで授業の詳細を表示）</th>
        <th>履修者<br>数合計</th>
      </tr>
    </thead>
    <tbody>
      {% for message in sub_list_counter %}
      <tr>
        <td>
          <form method="POST" action="{% url 'sirabasu' %}" target="_blank">
            {% csrf_token %}
            <input type="hidden" name="sub-name" value="{{message.0}}">
            <a href="javascript:void(0)" onclick="this.parentNode.submit()">{{message.0}}</a>
          </form>
        </td>
        <td>{{ message.1 }}人</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}









{% block js %}
<script>
$(document).ready(function() {


 var texts = $(".sub-name").map(function(){
     return $(this).text();
 }).get();
 console.log(texts[0])

});



</script>

{% endblock %}
