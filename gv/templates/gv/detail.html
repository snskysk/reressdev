{% extends 'gv/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block css %}
<link rel='stylesheet' type='text/css' href='{% static 'gv/detail/detail.css' %}' />


{% endblock%}

{% block body %}
<!--メインの部分-->
  <h1 class="page-header" style="text-align:center;">成績詳細</h1>
  <div class="detail_onclick" onclick="obj=document.getElementById('menu1').style; obj.display=(obj.display=='none')?'block':'none';">
    <a class="detail_a" style="cursor:pointer;"><span style="color: #000000;"><u>▼成績詳細検索▼</u></span></a><br><br>
  </div><!--detail_onclick-->
  <div id="menu1" style="display:none;clear:both;">
    <div class="panel panel-default line">
  	   <div class="panel-heading">
         成績詳細
  	    </div><!--panel-heading-->
  	    <div class="panel-body detail_panel">
          <form action='{% url 'detail' %}' method='post' name='detail'>
            {% csrf_token %}
            {% for field in form %}
              {% if forloop.first %}
                {{field|add_class:"field"|attr:"placeholder:教科名/先生"}}
              {% else %}
                <div class="cp_ipselect cp_sl04 line">
                  {{ field }}
                </div><!--cp_ipselect cp_sl04-->
              {% endif %}
            {% endfor %}
            <div><!--button-->
              <div class="detail_button_div">
                <button class="detail_button">
                  成績を見る
                </button>
              </div><!--detail-button-div-->
            </div><!--button-->
          </form>
  	    </div><!--panel-body-->
    </div><!--panel-primary-->
  </div><!--menu1-->
  <h6 style="text-align:center;">{{gpa_message|safe}}</h6>
  <div class="line">
    <table class='type06 table_center_class' id="report" width="100%">
      <thead>
        <tr>
          <th>科目名</th>
          <th>成績</th>
        </tr>
      </thead>
      <tbody>
        {% for message in filtered_sub %}
        <tr>
          <td>{{ message.subjectname }}</td>
          <td>{{ message.grade }}</td>
        </tr>
        <tr>
          <td colspan="40">
            <div class="line">
              <p style="text-align: center;">
              ▲この授業の詳細▲<br>先生の名前:{{message.teacher}}<br>
              受講年度:{{message.year_int}}<br>季節:{{message.season}}
            </p>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div><!--line-->
{% endblock %}


{% block js %}
<script src='{% static 'gv/detail/jExpand.js' %}'></script><!--tableを押すと列が拡大する-->
<script>
$("#report tr:odd").addClass("master");
$("#report tr:not(.master)").hide();
$("#report tr:first-child").show();
$("#report tr.master").click(function(){
    $(this).next("tr").toggle();
    $(this).find(".arrow").toggleClass("up");
});

</script>

{% endblock %}
